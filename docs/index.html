<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Attribute-Wise Learning for Scoring Outliers (ALSO) using Random Forests • ALSO</title>
<!-- jquery --><script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script><!-- Font Awesome icons --><link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script><!-- sticky kit --><script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script><!-- pkgdown --><link href="pkgdown.css" rel="stylesheet">
<script src="pkgdown.js"></script><meta property="og:title" content="Attribute-Wise Learning for Scoring Outliers (ALSO) using Random Forests">
<meta property="og:description" content="ALSO is an anomaly detection algorithm that uses predictive models
    to produce outlier scores. For a given dataset, separate models are fit for
    each feature. In each model, one feature is the target and the remaining features
    are predictors. Observations that consistently deviate from expected (predicted) 
    values across the individual models are scored highly and may represent 
    outliers/anomalies. This package uses random forests (from the ranger package)
    to build individual regressors and/or classifiers.">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="index.html">ALSO</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="articles/ALSO_RF.html">Attribute Wise Learning for Scoring Outliers</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      
      </header><div class="row">
  <div class="col-md-9 contents">
    

    
    
<p><em>Attribute-wise Learning for Scoring Outliers</em> (ALSO) is an unsupervised anomaly detection algorithm for multidimensional data. The main goal is to automate separate predictive models for each feature in the dataset. In each model, one feature in the dataset is the target and the remaining are predictors. A classifier or regressor is called to model the relationships. Observations are scored and compared to true values, and a numerical outlier score is returned for each observation based on the magnitude of deviation from expected values. Given the vector of numeric outlier scores, simple univariate techniques can be used to extract insights. Larger outlier scores suggest greater outlierness.</p>
<div id="install" class="section level1">
<div class="page-header"><h1 class="hasAnchor">
<a href="#install" class="anchor"></a>Install</h1></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">devtools<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/devtools/topics/install_github">install_github</a></span>(<span class="st">"dannymorris/ALSO"</span>)</code></pre></div>
<p>In <em>Outlier Analysis</em> (C.C Aggarwal. Springer, 2017), the author recommends the use of <strong>random forests</strong> as the base regressor/classifier. Random forest are highly robust regressors and classifiers due to bagging and ensembling.</p>
<p>Here we’ll examine the <code><a href="http://www.rdocumentation.org/packages/datasets/topics/state">datasets::state.x77</a></code> dataset. It contains 50 observations and 8 variables. The dataset is rather small, but it works well for illustration.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(dplyr)</code></pre></div>
<pre><code>## Warning: package 'dplyr' was built under R version 3.4.4</code></pre>
<pre><code>## 
## Attaching package: 'dplyr'</code></pre>
<pre><code>## The following objects are masked from 'package:stats':
## 
##     filter, lag</code></pre>
<pre><code>## The following objects are masked from 'package:base':
## 
##     intersect, setdiff, setequal, union</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(ALSO)</code></pre></div>
<div id="quick-data-prep" class="section level2">
<h2 class="hasAnchor">
<a href="#quick-data-prep" class="anchor"></a>Quick data prep</h2>
<p>Currently only data frame or tibbles are supported as inputs to the function.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># z-standardize all columns</span>
zstd &lt;-<span class="st"> </span><span class="cf">function</span>(x) {
    (x <span class="op">-</span><span class="st"> </span><span class="kw">mean</span>(x)) <span class="op">/</span><span class="st"> </span><span class="kw">sd</span>(x)
}</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">state_tbl &lt;-<span class="st"> </span>state.x77 <span class="op">%&gt;%</span>
<span class="st">    </span>dplyr<span class="op">::</span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/reexports.html">as_tibble</a></span>() <span class="op">%&gt;%</span>
<span class="st">    </span>dplyr<span class="op">::</span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/summarise_all.html">mutate_all</a></span>(zstd)</code></pre></div>
<pre><code>## Warning: package 'bindrcpp' was built under R version 3.4.4</code></pre>
</div>
<div id="using-the-also_rf-function" class="section level2">
<h2 class="hasAnchor">
<a href="#using-the-also_rf-function" class="anchor"></a>Using the ALSO_RF() function</h2>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">rf_also &lt;-<span class="st"> </span>ALSO<span class="op">::</span><span class="kw"><a href="http://www.rdocumentation.org/packages/ALSO/topics/ALSO_RF">ALSO_RF</a></span>(<span class="dt">data =</span> state_tbl,
                      <span class="dt">cross_validate =</span> <span class="ot">TRUE</span>,
                      <span class="dt">n_folds =</span> <span class="dv">5</span>,
                      <span class="dt">scores_only =</span> <span class="ot">TRUE</span>)

rf_also</code></pre></div>
<pre><code>##  [1] 0.5343839 4.0266014 1.4938961 0.7690885 2.3699090 1.1147723 0.8603198
##  [8] 0.5769301 0.5827787 0.6412195 4.0877570 0.1202023 0.4825187 0.1353360
## [15] 0.2743230 0.1448386 0.6763025 0.7706588 1.4320201 0.4333741 0.4069186
## [22] 0.4579308 0.2634523 0.4969639 0.5043916 0.5361353 0.1178495 2.5741424
## [29] 0.4428403 0.6331956 2.2121811 0.7095623 0.3575073 1.6292590 0.1615892
## [36] 0.4471947 0.8175154 0.6393042 1.5690133 0.5811726 0.5932511 0.2213195
## [43] 1.5816613 1.0520811 0.4150673 0.1967844 1.2710812 1.1594312 0.2834691
## [50] 0.5036228</code></pre>
<p>Here we return only the outlier scores. Observations are given out-of-sample scores via 5-fold cross validation.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">state_tbl <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">also_score =</span> rf_also) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/mutate.html">mutate</a></span>(<span class="dt">state =</span> <span class="kw">rownames</span>(state.x77)) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/arrange.html">arrange</a></span>(<span class="kw"><a href="http://dplyr.tidyverse.org/reference/desc.html">desc</a></span>(also_score)) <span class="op">%&gt;%</span>
<span class="st">    </span><span class="kw"><a href="http://dplyr.tidyverse.org/reference/select.html">select</a></span>(state, also_score) </code></pre></div>
<pre><code>## # A tibble: 50 x 2
##    state        also_score
##    &lt;chr&gt;             &lt;dbl&gt;
##  1 Hawaii             4.09
##  2 Alaska             4.03
##  3 Nevada             2.57
##  4 California         2.37
##  5 New Mexico         2.21
##  6 North Dakota       1.63
##  7 Texas              1.58
##  8 Rhode Island       1.57
##  9 Arizona            1.49
## 10 Maine              1.43
## # ... with 40 more rows</code></pre>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <div class="links">
<h2>Links</h2>
<ul class="list-unstyled">
<li>Report a bug at <br><a href="NA">NA</a>
</li>
</ul>
</div>
<div class="license">
<h2>License</h2>
<ul class="list-unstyled">
<li>
<a href="https://opensource.org/licenses/mit-license.php">MIT</a> + file <a href="LICENSE-text.html">LICENSE</a>
</li>
</ul>
</div>
<div class="developers">
<h2>Developers</h2>
<ul class="list-unstyled">
<li>Danny Morris <br><small class="roles"> Author, maintainer </small>  </li>
</ul>
</div>

      </div>

</div>


      <footer><div class="copyright">
  <p>Developed by Danny Morris.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
</div>

  

  </body>
</html>
